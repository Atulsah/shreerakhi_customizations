{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-10-13 12:13:46.387512",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Sales Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{% set child_table_data = doc.items %}\r\n\r\n{% set result_list = [] %}\r\n\r\n{% for row in child_table_data %}\r\n    {% set row_dict = {\r\n        'item_name': row.item_name,\r\n        'image': row.image,\r\n        'barcode' : row.barcode,\r\n        'description': row.description,\r\n        'gst_hsn_code': row.gst_hsn_code,\r\n        'qty': row.qty,\r\n        'uom': row.uom,\r\n        'curr': doc.price_list_currency,\r\n        'rate': row.rate,\r\n        'item_tax_rate': row.item_tax_template,\r\n        'taxable_value': row.taxable_value,\r\n        'amount': row.amount\r\n   } %}\r\n    {% set _ = result_list.append(row_dict) %}\r\n{% endfor %}\r\n\r\n\r\n\r\n{% set sorted_result_list = result_list | sort(attribute='item_code') %}\r\n\r\n{% for row in sorted_result_list %}\r\n    {% set _ = row.update({'idx': loop.index}) %}\r\n{% endfor %}\r\n\r\n<style>\r\n@media print {\r\n  @page {\r\n    size: A4;\r\n    margin: 10mm 8mm 10mm 8mm !important;\r\n  }\r\n  body {\r\n    font-family: \"Arial\", sans-serif;\r\n    font-size: 9.5px;\r\n    -webkit-print-color-adjust: exact !important;\r\n    color-adjust: exact !important;\r\n    line-height: 1.2;\r\n  }\r\n  table {\r\n    border-collapse: collapse;\r\n    width: 100%;\r\n    table-layout: fixed;\r\n    word-wrap: break-word;\r\n  }\r\n  th, td {\r\n    padding: 2px 3px;\r\n    word-break: break-word;\r\n    vertical-align: top;\r\n  }\r\n  img {\r\n    max-width: 100%;\r\n  }\r\n  .content-01, .content-02 {\r\n    page-break-inside: avoid;\r\n  }\r\n}\r\n\r\n/* for PDF generation consistency */\r\ntable {\r\n  border-collapse: collapse !important;\r\n  width: 100% !important;\r\n  table-layout: fixed !important;\r\n  word-wrap: break-word !important;\r\n}\r\nth, td {\r\n  font-size: 9px !important;\r\n  word-break: break-word !important;\r\n  white-space: normal !important;\r\n  line-height: 1.2 !important;\r\n  padding: 2px 4px !important;\r\n}\r\n.content-01 {\r\n  font-size: 9.5px !important;\r\n}\r\n</style>\r\n\r\n<div style=\"font-size:10px;\" class=\"content-01\">\r\n    <table border=\"1\" style=\"border-top: 8px inset black; border-bottom: 8px outset black; border-left: none; border-right: none;\" width=\"100%\">\r\n        <tbody>\r\n            <tr>\r\n                <!--<td style=\"border-right: 2px solid grey;\" width=\"30%\"><div style=\"padding-top: 10px; padding-left: 20px;\"><img alt=\"logo\" height=\"\" src=\"/files/1519915234882.jpg\" style=\"height: 80px; width: 140px; filter: grayscale(100%);\"></div></td>-->\r\n                <td style=\"border-right: 2px solid grey;\" width=\"20%\"><div style=\"padding-top: 5px; padding-left: 10px;\"><img alt=\"logo\" height=\"\" src=\"/files/1519915234882.jpg\" style=\"height: 130px; width: 130px;\"></div></td>\r\n                <td style=\"border-right: 2px; border-bottom: 1px solid #cdd0d4;\" width=\"50%\">\r\n                    <div style=\"display: inline;\">\r\n                        <br>\r\n                        <div style=\"display: flex; align-items: center; font-family: cursive; font-size: 12px; font-weight: bold; gap: 10px;\">\r\n                            <img alt=\"M. D. Mohta\" src=\"/files/Name.png\" style=\"height: 25px; width: 150px; padding-left: 50px; filter: grayscale(100%);\">\r\n                            <u>Rakhi Pvt. Ltd.</u>\r\n                        </div>\r\n                            <p style=\"padding-left: 50px; font-size: 10px;\">P- 31A Kalakar Street, 3rd Floor, Kolkata - 700007 <br>Phone 2270 1893/94, M.9331150473 <br>WAREHOUSE : 89/1, Salkia School Road, Howrah-711106 <br>Phone : 2665-4107 E-mail : shreerakhi@gmail.com <br>GSTIN : 19AAECM5102C1ZY CIN NO - U74999WB2005PTC104002</p>\r\n                        </div>\r\n                </td>\r\n                <td style=\"border-left: 0px; padding-right: 20px; border-bottom: 1px solid #cdd0d4; font-size: 25px; text-align:right;\" width=\"30%\">\r\n                    <br><br><br><br><br><br>\r\n                    {%- if doc.is_return -%}\r\n                        <b>Credit Note</b>\r\n                    {%- else -%}\r\n                        {%- if doc.meta.is_submittable and doc.docstatus==0-%}\r\n                            <b>Proforma Invoice</b>\r\n                        {%- else -%}\r\n                             {%- if doc.irn -%}\r\n                                <b>Tax Invoice</b>\r\n                            {%- else -%}\r\n                                <b>Bill of Supply</b>\r\n                            {%- endif -%}\r\n                            {%- if doc.docstatus==2 -%}\r\n                                <br><b>Cancelled</b>\r\n                            {%- endif -%}\r\n                        {%- endif -%}\r\n                    {%- endif -%}\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n    \r\n    <table width=\"100%\" class=\"table table-bordered\">\r\n        <tr>\r\n            <th style=\"border-right: 0px;\" width=\"15%\">\r\n                Invoice No.<br>\r\n                Invoice Date<br>\r\n                Terms<br>\r\n                Due Date<br>\r\n                {%- if doc.ewaybill -%} E-Way Bill No {%- endif -%}\r\n            </th>\r\n            <td style=\"border-left: 0px;\" width=\"35%\">\r\n                {{doc.name}}<br>\r\n                {{doc.get_formatted('posting_date')}}<br>\r\n                {{doc.payment_terms_template}}<br>\r\n                {{doc.get_formatted('due_date')}}<br>\r\n                {%- if doc.ewaybill -%} {{doc.ewaybill}} {%- endif -%}\r\n            </td>\r\n            <th style=\"border-right: 0px;\" width=\"25%\">\r\n                Place of Supply <br>\r\n                {%- if doc.po_no -%}P.O. No <br>{%- endif -%}\r\n                {%- if doc.po_no -%}P.O. Date <br>{%- endif -%}\r\n                {%- if not doc.irn -%} Product Description <br>{%- endif -%}\r\n                Transporter\r\n            </th>\r\n            <td style=\"border-left: 0px;\" width=\"25%\">\r\n                {{doc.place_of_supply}}<br>\r\n                {%- if doc.po_no -%}{{doc.po_no}}<br>{%- endif -%}\r\n                {%- if doc.po_no -%}{{doc.get_formatted('po_date')}}<br>{%- endif -%}\r\n                {%- if not doc.irn -%} <b>RAKHI - EXEMPTED</b><br> {%- endif -%}\r\n                {{ doc.custom_bos_transporter }}\r\n            </td>\r\n        </tr>\r\n        <tr><td colspan=\"4\" align=\"right\"> Page No. 1 </td></tr>\r\n    </table>\r\n    <table width=\"100%\" class=\"table table-bordered\" style=\"margin-top:-20px\">\r\n        <tr>\r\n            <th width=\"50%\" bgcolor=\"Lavender\">Bill To</th>\r\n            <th width=\"50%\" bgcolor=\"Lavender\">Ship To</th>\r\n        </tr>\r\n        <tr>\r\n            <td width=\"50%\">{{doc.customer_name}}<br>{{ doc.address_display }}<br>GSTIN : {{ doc.billing_address_gstin }} {%- if contact_mobile -%} <br> Phone No. : {{ doc.contact_mobile }} <br> {%- endif -%}</td>\r\n            {% if doc.shipping_address_name and doc.shipping_address %}\r\n                <td width=\"50%\">{{doc.custom_shipping_address_title}}<br>{{ doc.shipping_address }}<br></td>\r\n            {% else %}\r\n                <td width=\"50%\">{{doc.customer_name}}<br>{{ doc.address_display }}{%- if doc.billing_address_gstin -%}<br>GSTIN : {{ doc.billing_address_gstin }}{%- endif -%} {%- if contact_mobile -%} <br> Phone No. : {{ doc.contact_mobile }} <br> {%- endif -%}</td>\r\n            {% endif %}\r\n        </tr>\r\n    </table>\r\n    <table width=\"100%\" class=\"table table-bordered\" border=\"1\" style=\"margin-top:-21px\">\r\n        <tr>\r\n\t\t\t<th width=\"4%\"  rowspan=\"2\" align=\"center\">#</th>\r\n\t\t\t<th width=\"15%\" rowspan=\"2\" align=\"left\">Image</th>\r\n\t\t\t<th width=\"18%\" rowspan=\"2\" align=\"left\">Item & Description</th>\r\n\t\t\t<th width=\"10%\" rowspan=\"2\" align=\"center\">HSN/SAC</th>\r\n\t\t\t<th width=\"10%\" rowspan=\"2\" align=\"center\">Quantity</th>\r\n\t\t\t<th width=\"8%\" rowspan=\"2\" align=\"center\"><center>Rate</center></th>\r\n\t\t\t<th width=\"19%\" colspan=\"2\" align=\"center\"><center>GST</center></th>\r\n\t\t\t<th width=\"16%\" rowspan=\"2\" align=\"center\"><center>Amount</center></th>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<th width=\"8%\" align=\"center\"><center>%</center></th>\r\n\t\t\t<th width=\"11%\" align=\"center\"><center>Amount</center></th>\r\n\t\t</tr>\r\n\t\t{% set vars = {'total_box':0.0, 'total_amount': 0.0, 'last_idx':0} %}\r\n        {% set item_len = sorted_result_list|length %}\r\n        {% for item in sorted_result_list %}\r\n            {% if item['idx'] <= 10 %}\r\n        \t\t<tr>\r\n                    <td width=\"2%\" align=\"center\">\r\n                        {{ item['idx'] }} &nbsp;\r\n                    </td>\r\n                    <td width=\"15%\" align=\"center\">\r\n                        {% if item.image %}\r\n                            <img src=\"{{ item.image }}\" style=\"height:60px;width:60px;\">\r\n                        {% else %}\r\n                            No Image\r\n                        {% endif %}\r\n                    </td>\r\n                    <td width=\"20%\" align=\"left\">\r\n                        {{ item['item_name'] }} <br> {{ item['description'] }}</td>\r\n                    <td width=\"10%\" align=\"center\">{{ item['gst_hsn_code'] }}</td>\r\n                    <td width=\"10%\" align=\"right\">{{ item['qty']|int }} &nbsp; {{ item['uom'] }}</td>\r\n                    <td width=\"10%\" align=\"right\"> {{ frappe.format_value(item['rate'], {'fieldtype': 'Currency', 'options': 'INR'}, doc)}}</td>\r\n                    {% if item['item_tax_rate'] %}\r\n                        {% set list1 = item['item_tax_rate'].split(' ') %}\r\n                        {% set temp = list1[1] %}\r\n                        {% set rate = temp[:-1]|float %}\r\n                        <td width=\"8%\" align=\"right\">{{ rate }} % </td>\r\n                        {% set taxed_amt = item['taxable_value'] * (rate/100) %}\r\n                        <td width=\"11%\" align=\"right\">{{ frappe.format_value(taxed_amt, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }} </td>\r\n                        <td width=\"16%\" align=\"right\">{{ frappe.format_value(item['amount'], {'fieldtype': 'Currency', 'options': 'INR'}, doc) }} </td>\r\n                    {% else %}\r\n                        <td width=\"8%\" align=\"right\"> 0 % </td>\r\n                        <td width=\"11%\" align=\"right\">{{ frappe.format_value(item['taxable_value'], {'fieldtype': 'Currency', 'options': 'INR'}, doc) }} </td>\r\n                        <td width=\"16%\" align=\"right\">{{ frappe.format_value(item['amount'], {'fieldtype': 'Currency', 'options': 'INR'}, doc) }} </td>\r\n                    {% endif %}\r\n                    {% set vars = vars.update({'total_box': vars.total_box + item['qty']|int, 'total_amount': vars.total_amount + item['amount']|float,\r\n                    'last_idx': vars.last_idx + 1}) %}\r\n                </tr>\r\n            {%- endif -%}\r\n        {%- endfor -%}\r\n        \r\n        {% if item_len > 10 %}\r\n        <tr>\r\n            <td colspan=\"9\"><br></td>\r\n        </tr>\r\n        <tr>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n            <td align=\"right\" style=\"font-weight:bold;\">{{ vars.total_box|int }}</td>\r\n            <td align=\"right\"></td>\r\n            <td align=\"center\"></td>\r\n            <td align=\"right\"></td>\r\n            <td align=\"right\" style=\"font-weight:bold;\">{{ frappe.format_value(vars.total_amount, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }} </td>\r\n        </tr>\r\n        {% endif %}\r\n        \r\n        {% if vars.last_idx == item_len  %}\r\n            <tr>\r\n                <td colspan=\"9\"><br></td>\r\n            </tr>\r\n            <tr>\r\n                <td colspan = \"4\" style=\"border-right:0;\" align=\"left\"><b><i>AMOUNT</i></b></td>\r\n                <td style=\"border-left:0;\" align=\"right\"><b>{{ vars.total_box|int }}</b></td>\r\n                <td colspan=\"3\"></td>\r\n                <td align=\"right\"><b>{{ frappe.format_value(vars.total_amount, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }}</b></td>\r\n            </tr>\r\n            {% if doc.discount_amount > 0 %}\r\n                <tr>\r\n                    <td colspan=\"7\">DISCOUNT (Less : )</td>\r\n                    <td align=\"right\">{{ \"%0.2f\" | format( doc.additional_discount_percentage|float) }}%</td>\r\n                    <td align=\"right\">{{ frappe.format_value(doc.discount_amount, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }}</td>\r\n                </tr>\r\n            {% endif %}\r\n            {% for row in doc.taxes %}\r\n                <tr>\r\n                    {% if row.description != 'Freight and Forwarding Charges' %}\r\n                        <td colspan=\"8\">{{ row.description }}</td>\r\n                      <!--  <td align=\"right\">{{ \"%0.2f\" | format(row.rate|float) }} %</td> -->\r\n                        <td align=\"right\">{{ frappe.format_value(row.tax_amount, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }} </td>\r\n                    {% else %}\r\n                        <td colspan=\"4\" style=\"border-right:0;\">{{ row.description }}</td>\r\n                        <td colspan=\"2\" style=\"border-left:0; border-right-color:transparent;\">No. of cases</td>\r\n                        <td align=\"right\" style=\"border-left:0;\">{{ \"%0.2f\" | format(doc.custom_number_of_carton|float) }}</td>\r\n                        <td align=\"right\">{{ frappe.format_value(doc.custom_rate_per_carton, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }} </td>\r\n                        <td align=\"right\">{{ frappe.format_value(row.tax_amount, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }} </td>\r\n                    {% endif %}\r\n                </tr>\r\n            {% endfor %}\r\n            \r\n            <tr>\r\n                <td colspan=\"8\" style=\"font-weight:bold\"><i>ROUNDING ADJUSTMENT</i></td>\r\n                <td align=\"right\"><b>{{ frappe.format_value(doc.rounding_adjustment, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }}</b></td>\r\n            </tr>\r\n            \r\n            <tr>\r\n                <td colspan=\"8\" style=\"font-weight:bold\"><i>TOTAL AMOUNT</i></td>\r\n                <td align=\"right\"><b>{{ frappe.format_value(doc.rounded_total, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }}</b></td>\r\n            </tr>\r\n            <tr>\r\n                <td colspan=\"9\"><i>Rs. {{ doc.in_words[4:] }}</i></td>\r\n            </tr>\r\n            <tr>\r\n                <td colspan=\"9\" style=\"text-align:right; vertical-align:center\"> \r\n                    <div style=\"font-family: cursive; font-size: 10px; font-weight: bold;\"><b>For</b><img alt=\"M.D.MOHTA\" src=\"/files/Name.png\" style=\"height: 15px; width: 100px; filter: grayscale(100%)\"><u>Rakhi Pvt. Ltd.</u></div><br>\r\n                    <div style=\"font-family: cursive; font-size: 10px; font-weight: bold;\"><img alt=\"\" src=\"/files/kks_sig-removebg-preview.png\" style=\"height: 30px; width: 200px; filter: grayscale(100%)\"></div><br>\r\n                    <b>Director &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n        <table border=1 width=\"100%\" class=\"table table-bordered\" style=\"margin-top:-21px\">\r\n            <tbody>\r\n                <tr>\r\n                    <td><b>Tax Breakup </b>{{ doc.other_charges_calculation }}</td>\r\n                </tr>\r\n            </tbody>\r\n        {% endif %}\r\n        </table>\r\n        {% if doc.irn %}\r\n            <table width=\"100%\" class=\"table table-bordered\" border=\"1\" style=\"margin-top:-21px\">\r\n                <tr>\r\n                    <td rowspan=\"4\" width=\"35%\" height=\"150\"><center>\r\n                        {% if doc.irn %}\r\n                            {% set e_invoice_log = frappe.db.get_value(\r\n                             \"e-Invoice Log\", doc.irn, (\"invoice_data\", \"signed_qr_code\"), as_dict=True) %}\r\n                            {%- set invoice_data = dict(json.loads(e_invoice_log.invoice_data)) -%}\r\n                            <img src=\"data:image/png;base64,{{ get_qr_code(e_invoice_log.signed_qr_code, scale=2) }}\" class=\"qrcode\" height = 150 width = 150>\r\n                        {% endif %}\r\n                        </center>\r\n                    </td>\r\n        \t\t\t<th width=\"15%\" height=\"50\" align=\"left\">IRN</th>\r\n        \t\t\t<td width=\"50%\" height=\"50\" align=\"rleft\">{{ doc.irn }}</td>\r\n        \t\t</tr>\r\n        \t\t\r\n        \t\t{% set e_invoice_log = frappe.db.get_value(\"e-Invoice Log\", doc.irn, (\"invoice_data\"), as_dict=True) %}\r\n                {%- set invoice_data = _dict(json.loads(e_invoice_log.invoice_data)) -%}\r\n                {%\r\n            \t\tset transaction_details = {\r\n            \t\t\t\"Ack. No\": invoice_data.AckNo,\r\n            \t\t\t\"Ack. Date\": frappe.utils.format_datetime(\r\n            \t\t\t\tinvoice_data.AckDt, \"dd/MM/yyyy hh:mm:ss\"\r\n            \t\t\t),\r\n            \t\t}\r\n                %}\r\n            \t{% for key, value in transaction_details.items() %}\r\n                    <tr>\r\n            \t\t\t<th width=\"15%\" height=\"50\" style=\"text-align:left; vertical-align:center\">{{ key }}</td>\r\n            \t\t\t<td width=\"50%\" height=\"50\" style=\"text-align:left; vertical-align:center\">{{ value }}</td>\r\n            \t\t</tr>\r\n            \t{% endfor %}\r\n            \t\r\n        \t\t<tr>\r\n        \t\t\t<th colspan=\"4\"><center>e-Invoicing detail(s) generated from the Goverment's e-Invoicing Sysyem.</center></th>\r\n        \t\t</tr>\r\n        \t</table>\r\n            {% endif %}\r\n            {% if vars.last_idx == item_len and not doc.irn %}\r\n            \t<table width=\"100%\" style=\"margin-top:-21px; font-weight:bold\">\r\n                    <tr>\r\n                        <td>\r\n                            <p>Please pay in favour of \"M.D.MOHTA RAKHI PVT.LTD.\" Through either</p>\r\n                            <p>ICICI Bank Ltd.,Kolkata A/c No 694905600912 IFSC Code ICIC0006949 or</p>\r\n                            <p>DBS Bank India Limited A/c No 828200135528 IFSC Code DBSS0IN0828</p>\r\n                            <p>Rakhi is exempted from GST vide Notification No.19/2018 Dated 26/07/18</p>\r\n                        </td>\r\n                        <td style=\"text-align:center;\">Authorised Signatory</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td><p>Amendment No.02/2017 Dated 28/06/2017</p></td>\r\n                        <td style=\"text-align:center;\">E.& O.E.</td>\r\n                    </tr>\r\n                </table>\r\n            {% endif %}\r\n        \r\n        \r\n    \r\n    {% if item_len > 10 %}\r\n        <div style=\"font-size:12px;\" class=\"content-02\">\r\n            {% set total_page = (item_len - 10)/20 %}\r\n            {% if total_page|int == total_page|float %}\r\n            {% set total_page = total_page|int + 0 %}\r\n            {% else %}\r\n            {% set total_page = total_page|int + 1 %}\r\n            {% endif %}\r\n            {% for i in range(1, total_page|int + 1) %}\r\n                <table width=\"100%\" class=\"table table-bordered\" style=\"page-break-before: always;\">\r\n                    <tr>\r\n                        <td colspan=\"2\" align=\"center\">\r\n                            {%- if doc.is_return -%}\r\n                                <b>Credit Note</b>\r\n                            {%- else -%}\r\n                                {%- if doc.meta.is_submittable and doc.docstatus==0-%}\r\n                                    <b>Proforma Invoice</b>\r\n                                {%- else -%}\r\n                                    {%- if doc.irn -%}\r\n                                        <b>Tax Invoice</b>\r\n                                    {%- else -%}\r\n                                        <b>Bill of Supply</b>\r\n                                    {%- endif -%}\r\n                                    {%- if doc.docstatus==2 -%}\r\n                                        <br><b>Cancelled</b>\r\n                                    {%- endif -%}\r\n                                {%- endif -%}\r\n                            {%- endif -%}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td width=\"50%\">INVOICE NO. : {{doc.name}}&emsp;&emsp;&emsp;&emsp;&emsp;DATE : {{doc.get_formatted('posting_date')}}</td>\r\n                        <td width=\"50%\"><b>State Code & Name :</b>&emsp;{{doc.place_of_supply}}<div style=\"right:5px; display:inline-block;position:absolute;\">Page No : {{ i + 1 }}</div></td>\r\n                    </tr>\r\n                </table>\r\n                \r\n                <table width=\"100%\" class=\"table table-bordered\" border=\"1\" style=\"margin-top:-21px\">\r\n                    <tr>\r\n            \t\t\t<th width=\"4%\"  rowspan=\"2\" align=\"center\">#</th>\r\n            \t\t\t<th width=\"15%\" rowspan=\"2\" align=\"left\">Image</th>\r\n            \t\t\t<th width=\"18%\" rowspan=\"2\" align=\"left\">Item & Description</th>\r\n            \t\t\t<th width=\"10%\" rowspan=\"2\" align=\"center\">HSN/SAC</th>\r\n            \t\t\t<th width=\"10%\" rowspan=\"2\" align=\"center\">Quantity</th>\r\n            \t\t\t<th width=\"8%\" rowspan=\"2\" align=\"center\"><center>Rate</center></th>\r\n            \t\t\t<th width=\"19%\" colspan=\"2\" align=\"center\"><center>GST</center></th>\r\n            \t\t\t<th width=\"16%\" rowspan=\"2\" align=\"center\"><center>Amount</center></th>\r\n            \t\t</tr>\r\n            \t\t<tr>\r\n            \t\t\t<th width=\"8%\" align=\"center\"><center>%</center></th>\r\n            \t\t\t<th width=\"11%\" align=\"center\"><center>Amount</center></th>\r\n            \t\t</tr>\r\n                    <tr>\r\n                        <td colspan=\"9\"><br></td>\r\n                    </tr>\r\n                    \r\n                    <tr>\r\n                        <td></td>\r\n                        <td></td>\r\n                        <td></td>\r\n                        <td align=\"right\" style=\"font-weight:bold;\">{{ vars.total_box|int }}</td>\r\n                        <td align=\"right\"></td>\r\n                        <td align=\"center\"></td>\r\n                        <td align=\"right\"></td>\r\n                        <td align=\"right\" style=\"font-weight:bold;\">{{ frappe.format_value(vars.total_amount, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }}</td>\r\n                    </tr>\r\n                    {% set vars1 = {'last_idx_1': vars.last_idx + 20} %}\r\n                    {% for item in sorted_result_list %}\r\n                        {% if item['idx'] > vars.last_idx and item['idx'] <= vars1.last_idx_1 %}\r\n                            <tr>\r\n                                <td width=\"2%\" align=\"center\">{{ item['idx'] }}</td>\r\n                                <td width=\"15%\" align=\"center\">\r\n                                    {% if item['image'] %}\r\n                                        <img src=\"{{ item['image'] }}\" style=\"height:60px; width:60px;\">\r\n                                    {% else %}\r\n                                        No Image\r\n                                    {% endif %}\r\n                                </td>\r\n                                <td width=\"20%\" align=\"left\">{{ item['item_name'] }} <br> {{ item['description'] }}</td>\r\n                                <td width=\"10%\" align=\"center\">{{ item['gst_hsn_code'] }}</td>\r\n                                <td width=\"10%\" align=\"right\">{{ item['qty']|int }} &nbsp; {{ item['uom'] }}</td>\r\n                                <td width=\"10%\" align=\"right\">{{ frappe.format_value(item['rate'], {'fieldtype': 'Currency', 'options': 'INR'}, doc) }} </td>\r\n                                {% if item['item_tax_rate'] %}\r\n                                    {% set list1 = item['item_tax_rate'].split(' ') %}\r\n                                    {% set temp = list1[1] %}\r\n                                    {% set rate = temp[:-1]|float %}\r\n                                    <td width=\"8%\" align=\"right\">{{ rate }} % </td> \r\n                                    {% set taxed_amt = item['taxable_value'] * (rate/100) %}\r\n                                    <td width=\"11%\" align=\"right\"> {{ frappe.format_value(taxed_amt, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }} </td>\r\n                                    <td width=\"16%\" align=\"right\"> {{ frappe.format_value(item['amount'], {'fieldtype': 'Currency', 'options': 'INR'}, doc) }} </td>\r\n                                {% else %}\r\n                                    <td width=\"8%\" align=\"right\"> 0 % </td>\r\n                                    <td width=\"11%\" align=\"right\"> {{ frappe.format_value(item['taxable_value'], {'fieldtype': 'Currency', 'options': 'INR'}, doc) }} </td>\r\n                                    <td width=\"16%\" align=\"right\"> {{ frappe.format_value(item['amount'], {'fieldtype': 'Currency', 'options': 'INR'}, doc) }} </td>\r\n                                {% endif %}\r\n                                {% set vars = vars.update({'total_box': vars.total_box + item['qty']|int, 'total_amount': vars.total_amount + item['amount']|float,\r\n                                'last_idx': vars.last_idx + 1}) %}\r\n                            </tr>\r\n                        {% endif %}\r\n                    {% endfor %}\r\n                    {% if vars.last_idx != item_len  %}\r\n                        <tr>\r\n                            <td colspan=\"9\"><br></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td align=\"right\" style=\"font-weight:bold;\">{{ vars.total_box|int }}</td>\r\n                            <td align=\"right\"></td>\r\n                            <td align=\"center\"></td>\r\n                            <td align=\"right\"></td>\r\n                            <td align=\"right\" style=\"font-weight:bold;\">{{ frappe.format_value(vars.total_amount, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }} </td>\r\n                        </tr>\r\n                    {% endif %}\r\n                    \r\n                    \r\n                    \r\n                    {% if vars.last_idx == item_len  %}\r\n                        <tr>\r\n                            <td colspan=\"9\"><br></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan = \"4\" style=\"border-right:0;\" align=\"left\"><b><i>AMOUNT</i></b></td>\r\n                            <td style=\"border-left:0;\" align=\"right\"><b>{{ vars.total_box|int }}</b></td>\r\n                            <td colspan=\"3\"></td>\r\n                            <td align=\"right\"><b>{{ frappe.format_value(vars.total_amount, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }}</b></td>\r\n                        </tr>\r\n                        {% if doc.discount_amount > 0 %}\r\n                            <tr>\r\n                                <td colspan=\"7\">DISCOUNT (Less : )</td>\r\n                                <td align=\"right\">{{ \"%0.2f\" | format( doc.additional_discount_percentage|float) }}%</td>\r\n                                <td align=\"right\">{{ frappe.format_value(doc.discount_amount, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }}</td>\r\n                            </tr>\r\n                        {% endif %}\r\n                        \r\n                    \r\n                        {% for row in doc.taxes %}\r\n                            <tr>\r\n                                {% if row.description != 'Freight and Forwarding Charges' %}\r\n                                    <td colspan=\"8\">{{ row.description }}</td>\r\n                                    <!-- <td align=\"right\">{{ \"%0.2f\" | format(row.rate|float) }} %</td> -->\r\n                                    <td align=\"right\">{{ frappe.format_value(row.tax_amount, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }}</td>\r\n                                {% else %}\r\n \r\n                                    <td colspan=\"4\" style=\"border-right:0;\">{{ row.description }}</td>\r\n                                    <td colspan=\"2\" style=\"border-left:0; border-right-color:transparent;\">No. of cases</td>\r\n                                    <td align=\"right\" style=\"border-left:0;\">{{ \"%0.2f\" | format(doc.custom_number_of_carton|float) }}</td>\r\n                                    <td align=\"right\">{{ frappe.format_value(doc.custom_rate_per_carton, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }}</td>\r\n                                    <td align=\"right\">{{ frappe.format_value(row.tax_amount, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }}</td>\r\n\r\n                                {% endif %}\r\n                            </tr>\r\n                        {% endfor %}\r\n\r\n                         <tr>\r\n                            <td colspan=\"8\" style=\"font-weight:bold\"><i>ROUNDING ADJUSTMENT</i></td>\r\n                            <td align=\"right\"><b>{{ frappe.format_value(doc.rounding_adjustment, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }}</b></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan=\"8\" style=\"font-weight:bold\"><i>TOTAL AMOUNT</i></td>\r\n                            <td align=\"right\"><b>{{ frappe.format_value(doc.rounded_total, {'fieldtype': 'Currency', 'options': 'INR'}, doc) }}</b></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan=\"9\"><i>Rs. {{ doc.in_words[4:] }}</i></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan=\"9\" style=\"text-align:right; vertical-align:center\"> \r\n                                <div style=\"font-family: cursive; font-size: 10px; font-weight: bold;\"><b>For</b><img alt=\"M.D.MOHTA\" src=\"/files/Name.png\" style=\"height: 15px; width: 100px; filter: grayscale(100%)\"><u>Rakhi Pvt. Ltd.</u></div><br>\r\n                                <div style=\"font-family: cursive; font-size: 10px; font-weight: bold;\"><img alt=\"\" src=\"/files/kks_sig-removebg-preview.png\" style=\"height: 30px; width: 200px; filter: grayscale(100%)\"></div><br>\r\n                                <b>Director &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                    <table border=1 width=\"100%\" class=\"table table-bordered\" style=\"margin-top:-21px\">\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>{{ doc.other_charges_calculation }}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                    \r\n                {% endif %}\r\n                </table>\r\n                {% if doc.irn %}\r\n                    <table width=\"100%\" class=\"table table-bordered\" border=\"1\" style=\"margin-top:-21px\">\r\n                        <tr>\r\n                            <td rowspan=\"3\" width=\"35%\" height=\"150\"><center>\r\n                                {% if doc.irn %}\r\n                                    {% set e_invoice_log = frappe.db.get_value(\r\n                                     \"e-Invoice Log\", doc.irn, (\"invoice_data\", \"signed_qr_code\"), as_dict=True) %}\r\n                                    {%- set invoice_data = dict(json.loads(e_invoice_log.invoice_data)) -%}\r\n                                    <img src=\"data:image/png;base64,{{ get_qr_code(e_invoice_log.signed_qr_code, scale=2) }}\" class=\"qrcode\" height = 150 width = 150>\r\n                                {% endif %}\r\n                                </center>\r\n                            </td>\r\n                \t\t\t<th width=\"15%\" height=\"50\" align=\"left\">IRN</th>\r\n                \t\t\t<td width=\"50%\" height=\"50\" align=\"rleft\">{{ doc.irn }}</td>\r\n                \t\t</tr>\r\n                \t\t\r\n                    \t\t{% set e_invoice_log = frappe.db.get_value(\"e-Invoice Log\", doc.irn, (\"invoice_data\"), as_dict=True) %}\r\n                            {%- set invoice_data = _dict(json.loads(e_invoice_log.invoice_data)) -%}\r\n                            {%\r\n                        \t\tset transaction_details = {\r\n                        \t\t\t\"Ack. No\": invoice_data.AckNo,\r\n                        \t\t\t\"Ack. Date\": frappe.utils.format_datetime(\r\n                        \t\t\t\tinvoice_data.AckDt, \"dd/MM/yyyy hh:mm:ss\"\r\n                        \t\t\t),\r\n                        \t\t}\r\n                            %}\r\n                        \t{% for key, value in transaction_details.items() %}\r\n                                <tr>\r\n                        \t\t\t<th width=\"15%\" height=\"50\" style=\"text-align:left; vertical-align:center\">{{ key }}</td>\r\n                        \t\t\t<td width=\"50%\" height=\"50\" style=\"text-align:left; vertical-align:center\">{{ value }}</td>\r\n                        \t\t</tr>\r\n                        \t{% endfor %}\r\n                        \r\n                \r\n                \t\t<tr>\r\n                \t\t\t<th colspan=\"3\"><center>e-Invoicing detail(s) generated from the Goverment's e-Invoicing Sysyem.</center></th>\r\n                \t\t</tr>\r\n                \t</table>\r\n                {% endif %}\r\n                {% if vars.last_idx == item_len and not doc.irn %}\r\n                    \t<table width=\"100%\" style=\"margin-top:-21px; font-weight:bold\">\r\n                            <tr>\r\n                                <td>\r\n                                    <p>Please pay in favour of \"M.D.MOHTA RAKHI PVT.LTD.\" Through either</p>\r\n                                    <p>ICICI Bank Ltd.,Kolkata A/c No 694905600912 IFSC Code ICIC0006949 or</p>\r\n                                    <p>DBS Bank India Limited A/c No 828200135528 IFSC Code DBSS0IN0828</p>\r\n                                    <p>Rakhi is exempted from GST vide Notification No.19/2018 Dated 26/07/18</p>\r\n                                </td>\r\n                                <td style=\"text-align:center;\">Authorised Signatory</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td><p>Amendment No.02/2017 Dated 28/06/2017</p></td>\r\n                                <td style=\"text-align:center;\">E.& O.E.</td>\r\n                            </tr>\r\n                        </table>\r\n                    {% endif %}\r\n            {% endfor %}\r\n        </div>\r\n    {% endif %} \r\n\r\n    ",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-10-14 12:39:20.912450",
 "modified_by": "Administrator",
 "module": "Shree",
 "name": "Shree Rakhi - Corporate Invoice with Image",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}